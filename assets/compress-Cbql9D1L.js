import{q as g,u as e,d as m,y as v,k as B}from"./index-D1153-67.js";import{d as N,B as b,U as w,M as C}from"./download-BT9AGL2B.js";import{H as I}from"./Helmet-BA2uRznI.js";import{B as d}from"./breadcrumb-VPTBzqTN.js";import{F as p}from"./figure-image-DB4zF1zb.js";function M(a,r,s){const t=new Image,c=(100-r)/100;t.src=URL.createObjectURL(a),t.onload=function(){URL.revokeObjectURL(t.src);const o=document.createElement("canvas"),n=o.getContext("2d");o.width=t.width,o.height=t.height,n.drawImage(t,0,0);const l=o.toDataURL("image/webp",c);s({src:l,size:atob(l.split(",")[1]).length})}}function h(a){const r=a===0?a:Math.floor(Math.log(a)/Math.log(1024)),s=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];return`${(a/Math.pow(1024,r)).toFixed(2)} ${s[r]}`}function L({compressedImage:a,level:r,originalImage:s,setLevel:t}){const c=g(n=>t(n.currentTarget.value),[r]),o=g(()=>{N(a.src,s.name,s.type)},[a,s]);return e(b,{downloadImage:o,icon:"arrows-angle-contract",id:"compressModal",title:"Compress Image",children:e("div",{className:"g-3 row",children:[e("div",{className:"col-lg-6",children:e(p,{alt:"Original image",source:s.src,children:["Original size:"," ",e("strong",{className:"text-danger",children:h(s.size)})]})}),e("div",{className:"col-lg-6",children:e(p,{alt:"Compressed image",source:a.src,children:["Compressed size:"," ",e("strong",{className:"text-success",children:h(a.size)})]})}),e("div",{className:"col-12",children:[e("label",{className:"form-label",htmlFor:"level",children:"Compression Level"}),e("input",{className:"form-range",max:100,min:0,onChange:c,type:"range",value:r}),e("div",{className:"input-group w-fit",children:[e("input",{className:"form-control",max:100,min:0,onChange:c,type:"number",value:r}),e("span",{className:"input-group-text",children:e("i",{className:"bi bi-percent"})})]})]})]})})}function F(){const[a,r]=m(null),[s,t]=m(0),[c,o]=m({}),[n,l]=m({});v(()=>{c.src&&M(a,s,l)},[s,c]);const f=u=>{C.getOrCreateInstance("#compressModal").show();const i=u.currentTarget.files[0];r(i),i.src=URL.createObjectURL(i),o(i),u.currentTarget.value=null,t(70)};return e(B,{children:[e(I,{title:"Compress Image"}),e(d,{children:[e(d.Item,{url:"/",children:[e("i",{className:"bi bi-house"})," Home"]}),e(d.Item,{active:!0,children:[e("i",{className:"bi bi-arrows-angle-contract"})," Compress Image"]})]}),e(w,{title:"Compress Image",uploadImage:f}),e(L,{compressedImage:n,level:s,originalImage:c,setLevel:t})]})}export{F as default};
